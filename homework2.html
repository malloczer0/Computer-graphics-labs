<html>
<body>
<canvas id='lab02' height='350' width='600' style="border:3px solid; border-radius:100px; border-color:pink">
</canvas>
<canvas id='hw02' height='350' width='600' style="border:3px solid; border-radius:100px; border-color:grey">
</canvas>
<script>
  let canvas = document.getElementById('lab02');
  let ctx = canvas.getContext('2d');
  let canvas2 = document.getElementById('hw02');
  let ctx2 = canvas2.getContext('2d');
  let img = new Image();
  let img2 = new Image();

  img.src = 'astolfo_plushie.jpg';
  img2.src = img.src

  img.onload = function() {
    ctx.drawImage(img, 0, 0);
  }
  let imgData = ctx.getImageData(0,0,canvas.width, canvas.height);
  for (let i = 0; i != canvas.height; i++) {
    for (let j = 0; j != canvas.width; j++) {
      let average = (imgData.data[i+j]+imgData.data[i+j+1]+imgData.data[i+j+2])/3;
      imgData.data[i+j] = average;
      imgData.data[i+j+1] = average;
      imgData.data[i+j+2] = average;
    }
  }
  ctx2.putImageData(imgData,0,0);
  img2.onload = function() {
    let pattern = ctx2.createPattern(this, 'repeat');
    ctx2.fillStyle = pattern;
    ctx2.fill();
  }
</script>
</body>
</html>

